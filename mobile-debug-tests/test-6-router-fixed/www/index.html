<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rishi Platform - Router Fixed</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, Arial, sans-serif; background: #f5f5f5; }
        
        .debug { position: fixed; bottom: 0; left: 0; right: 0; background: black; color: lime; 
                 padding: 10px; font-family: monospace; font-size: 11px; max-height: 150px; 
                 overflow-y: auto; z-index: 1000; border-top: 2px solid lime; }
        
        .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 15px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
        .logo { font-size: 24px; font-weight: bold; display: flex; align-items: center; gap: 8px; }
        .logo-icon { font-size: 28px; }
        
        .nav { background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%); color: white; padding: 12px; display: flex; flex-wrap: wrap; gap: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .nav button { color: white; background: rgba(255,255,255,0.1); border: none; padding: 10px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s ease; }
        .nav button:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }
        .nav button.active { background: rgba(255,255,255,0.25); font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        
        .content { padding: 20px; max-width: 1200px; margin: 0 auto; margin-bottom: 170px; }
        .page-title { font-size: 28px; margin-bottom: 20px; color: #1e3c72; font-weight: 600; }
        
        .card { background: white; border-radius: 12px; padding: 24px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05); transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        .card h2 { color: #1e3c72; margin-bottom: 12px; font-size: 20px; font-weight: 600; }
        .card h3 { color: #2a5298; margin-bottom: 8px; font-size: 18px; font-weight: 500; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3); }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .status { padding: 8px 12px; border-radius: 6px; font-size: 12px; font-weight: 500; }
        .status.success { background: #d1f2eb; color: #0d7f56; border: 1px solid #a3d9d0; }
        .status.router { background: #e1f5fe; color: #0277bd; border: 1px solid #b3e5fc; }
        .status.pending { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        
        .dashboard-stats { display: flex; justify-content: space-between; margin-bottom: 20px; gap: 15px; }
        .stat-card { background: white; padding: 20px; border-radius: 10px; text-align: center; flex: 1; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-number { font-size: 32px; font-weight: 700; color: #1e3c72; }
        .stat-label { font-size: 14px; color: #666; margin-top: 5px; }
        
        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .data-table th { background: #f8f9fa; padding: 12px; text-align: left; font-weight: 600; color: #1e3c72; border-bottom: 2px solid #dee2e6; }
        .data-table td { padding: 12px; border-bottom: 1px solid #dee2e6; }
        .data-table tr:hover { background: #f8f9fa; }
        
        @media (max-width: 768px) {
            .nav button { font-size: 14px; padding: 6px 10px; }
            .content { padding: 15px; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="debug" class="debug">Debug Console (Router Structure Fixed):</div>
    
    <script>
        window.debugLog = function(msg) {
            const debug = document.getElementById('debug');
            const time = new Date().toTimeString().split(' ')[0];
            debug.innerHTML += '<br>' + time + ' - ' + msg;
            debug.scrollTop = debug.scrollHeight;
            console.log('DEBUG:', msg);
        };
        
        window.onerror = function(msg, url, line, col, error) {
            debugLog('ERROR: ' + msg + ' at line ' + line);
            return true;
        };
        
        debugLog('=== REACT ROUTER STRUCTURE DEBUGGING ===');
        debugLog('React: ' + (window.React ? 'Loaded' : 'Missing'));
        debugLog('ReactDOM: ' + (window.ReactDOM ? 'Loaded' : 'Missing'));
        debugLog('ReactRouter: ' + (window.ReactRouterDOM ? 'Loaded' : 'Missing'));
        
        if (window.ReactRouterDOM) {
            debugLog('Available exports: ' + Object.keys(window.ReactRouterDOM).join(', '));
        }
    </script>
    
    <script type="text/babel">
        try {
            debugLog('RISHI PLATFORM - STATE-BASED NAVIGATION (NO REACT ROUTER)');
            debugLog('Avoiding React Router mobile compatibility issues');
            
            // Direct state-based navigation - no React Router dependency
            const { useState, useEffect } = React;
            const e = React.createElement;
            
            // Mock data
            const mockBookings = [
                { id: 1, client: 'Green Valley Dispensary', date: '2025-07-26', status: 'confirmed' },
                { id: 2, client: 'Mountain View Cannabis', date: '2025-07-27', status: 'pending' }
            ];
            
            const mockStaff = [
                { id: 1, name: 'John Martinez', role: 'Field Agent', status: 'active' },
                { id: 2, name: 'Sarah Chen', role: 'Field Manager', status: 'active' }
            ];
            
            function Dashboard({ setCurrentPage }) {
                useEffect(() => {
                    debugLog('Dashboard component mounted');
                }, []);
                
                return e('div', null,
                    e('h1', {className: 'page-title'}, 'Workforce Management Dashboard'),
                    e('div', {className: 'status success'}, 'Mobile app working with Capacitor 7.4.2!'),
                    
                    e('div', {className: 'dashboard-stats'},
                        e('div', {className: 'stat-card'},
                            e('div', {className: 'stat-number'}, '5'),
                            e('div', {className: 'stat-label'}, 'Today\'s Bookings')
                        ),
                        e('div', {className: 'stat-card'},
                            e('div', {className: 'stat-number'}, '12'),
                            e('div', {className: 'stat-label'}, 'Active Staff')
                        ),
                        e('div', {className: 'stat-card'},
                            e('div', {className: 'stat-number'}, '8'),
                            e('div', {className: 'stat-label'}, 'Locations')
                        )
                    ),
                    
                    e('div', {className: 'grid'},
                        e('div', {className: 'card'},
                            e('h2', null, 'üìÖ Today\'s Bookings'),
                            e('p', null, '5 bookings scheduled for today'),
                            e('button', {
                                className: 'btn btn-primary',
                                onClick: () => {
                                    debugLog('Navigation: Dashboard ‚Üí Bookings');
                                    setCurrentPage('bookings');
                                }
                            }, 'View All Bookings')
                        ),
                        e('div', {className: 'card'},
                            e('h2', null, 'üë• Active Staff'),
                            e('p', null, '12 staff members currently on duty'),
                            e('button', {
                                className: 'btn btn-primary',
                                onClick: () => {
                                    debugLog('Navigation: Dashboard ‚Üí Staff');
                                    setCurrentPage('staff');
                                }
                            }, 'Manage Staff')
                        ),
                        e('div', {className: 'card'},
                            e('h2', null, 'üìç Locations'),
                            e('p', null, '8 active locations monitored'),
                            e('button', {
                                className: 'btn btn-primary',
                                onClick: () => {
                                    debugLog('Navigation: Dashboard ‚Üí Locations');
                                    setCurrentPage('locations');
                                }
                            }, 'View Locations')
                        ),
                        e('div', {className: 'card'},
                            e('h2', null, 'üì¶ Inventory'),
                            e('p', null, '156 items currently in stock'),
                            e('button', {
                                className: 'btn btn-primary',
                                onClick: () => {
                                    debugLog('Navigation: Dashboard ‚Üí Inventory');
                                    setCurrentPage('inventory');
                                }
                            }, 'Manage Inventory')
                        )
                    )
                );
            }
            
            function Bookings({ setCurrentPage }) {
                return e('div', null,
                    e('h1', {className: 'page-title'}, 'Bookings Management'),
                    e('div', {className: 'status success'}, 'Navigation working perfectly!'),
                    e('div', {className: 'card'},
                        e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}},
                            e('h2', {style: {margin: 0}}, 'Active Bookings'),
                            e('button', {className: 'btn btn-primary'}, '+ New Booking')
                        ),
                        e('table', {className: 'data-table'},
                            e('thead', null,
                                e('tr', null,
                                    e('th', null, 'Client'),
                                    e('th', null, 'Date'),
                                    e('th', null, 'Status'),
                                    e('th', null, 'Staff')
                                )
                            ),
                            e('tbody', null,
                                mockBookings.map(booking =>
                                    e('tr', {key: booking.id},
                                        e('td', null, e('strong', null, booking.client)),
                                        e('td', null, booking.date),
                                        e('td', null, 
                                            e('span', {
                                                className: 'status ' + (booking.status === 'confirmed' ? 'success' : 'pending')
                                            }, booking.status)
                                        ),
                                        e('td', null, booking.staff + ' assigned')
                                    )
                                )
                            )
                        )
                    )
                );
            }
            
            function Staff({ setCurrentPage }) {
                return e('div', null,
                    e('h1', {className: 'page-title'}, 'Staff Management'),
                    e('div', {className: 'status success'}, 'Staff management system active'),
                    e('div', {className: 'card'},
                        e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}},
                            e('h2', {style: {margin: 0}}, 'Team Roster'),
                            e('button', {className: 'btn btn-primary'}, '+ Add Staff Member')
                        ),
                        e('div', {className: 'grid'},
                            mockStaff.map(member =>
                                e('div', {key: member.id, className: 'card', style: {margin: '10px 0'}},
                                    e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start'}},
                                        e('div', null,
                                            e('h3', null, member.name),
                                            e('p', {style: {color: '#666', marginBottom: '5px'}}, member.role),
                                            e('p', {style: {color: '#666', fontSize: '14px'}}, 'üìç ' + member.location)
                                        ),
                                        e('span', {
                                            className: 'status ' + (member.status === 'active' ? 'success' : 'pending')
                                        }, member.status)
                                    )
                                )
                            )
                        )
                    )
                );
            }
            
            function Locations({ setCurrentPage }) {
                const mockLocations = [
                    { id: 1, name: 'Downtown Dispensary', address: '123 Main St', status: 'active', staff: 3 },
                    { id: 2, name: 'Westside Cannabis Co', address: '456 West Ave', status: 'active', staff: 2 },
                    { id: 3, name: 'North Valley Shop', address: '789 North Blvd', status: 'maintenance', staff: 1 }
                ];
                
                return e('div', null,
                    e('h1', {className: 'page-title'}, 'Location Management'),
                    e('div', {className: 'status success'}, 'Location system operational'),
                    e('div', {className: 'card'},
                        e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}},
                            e('h2', {style: {margin: 0}}, 'Service Locations'),
                            e('button', {className: 'btn btn-primary'}, '+ Add Location')
                        ),
                        e('div', {className: 'grid'},
                            mockLocations.map(location =>
                                e('div', {key: location.id, className: 'card'},
                                    e('h3', null, location.name),
                                    e('p', {style: {color: '#666', marginBottom: '10px'}}, 'üìç ' + location.address),
                                    e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center'}},
                                        e('span', {style: {fontSize: '14px', color: '#666'}}, location.staff + ' staff assigned'),
                                        e('span', {
                                            className: 'status ' + (location.status === 'active' ? 'success' : 'pending')
                                        }, location.status)
                                    )
                                )
                            )
                        )
                    )
                );
            }
            
            function Inventory({ setCurrentPage }) {
                const mockInventory = [
                    { id: 1, name: 'Field Agent Kit', items: 25, status: 'in-stock' },
                    { id: 2, name: 'Manager Toolkit', items: 8, status: 'low-stock' },
                    { id: 3, name: 'Event Setup Kit', items: 15, status: 'in-stock' }
                ];
                
                return e('div', null,
                    e('h1', {className: 'page-title'}, 'Inventory Management'),
                    e('div', {className: 'status success'}, 'Inventory tracking active'),
                    e('div', {className: 'card'},
                        e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}},
                            e('h2', {style: {margin: 0}}, 'Kit Templates'),
                            e('button', {className: 'btn btn-primary'}, '+ Create Kit')
                        ),
                        e('div', {className: 'grid'},
                            mockInventory.map(kit =>
                                e('div', {key: kit.id, className: 'card'},
                                    e('h3', null, kit.name),
                                    e('div', {style: {display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '15px'}},
                                        e('span', {style: {fontSize: '16px', fontWeight: '600'}}, kit.items + ' items'),
                                        e('span', {
                                            className: 'status ' + (kit.status === 'in-stock' ? 'success' : 'pending')
                                        }, kit.status)
                                    )
                                )
                            )
                        )
                    )
                );
            }
            
            function App() {
                const [currentPage, setCurrentPage] = useState('dashboard');
                
                useEffect(() => {
                    debugLog('App mounted - Using state-based navigation');
                    debugLog('Current page: ' + currentPage);
                }, [currentPage]);
                
                const pages = {
                    dashboard: Dashboard,
                    bookings: Bookings,
                    staff: Staff,
                    locations: Locations,
                    inventory: Inventory
                };
                
                const CurrentPageComponent = pages[currentPage];
                
                return e('div', null,
                    // Status indicator
                    e('div', {
                        className: 'status router',
                        style: { position: 'fixed', top: '10px', right: '10px', zIndex: 999 }
                    }, 'Page: ' + currentPage),
                    
                    // Header
                    e('div', {className: 'header'},
                        e('div', {className: 'logo'}, 
                            e('span', {className: 'logo-icon'}, 'üåø'),
                            'Rishi Platform'
                        ),
                        e('div', {style: {fontSize: '14px', opacity: 0.9}}, 'Mobile Workforce Management')
                    ),
                    
                    // Navigation
                    e('nav', {className: 'nav'},
                        e('button', {
                            className: currentPage === 'dashboard' ? 'active' : '',
                            onClick: () => setCurrentPage('dashboard')
                        }, 'Dashboard'),
                        e('button', {
                            className: currentPage === 'bookings' ? 'active' : '',
                            onClick: () => setCurrentPage('bookings')
                        }, 'Bookings'),
                        e('button', {
                            className: currentPage === 'staff' ? 'active' : '',
                            onClick: () => setCurrentPage('staff')
                        }, 'Staff'),
                        e('button', {
                            className: currentPage === 'locations' ? 'active' : '',
                            onClick: () => setCurrentPage('locations')
                        }, 'Locations'),
                        e('button', {
                            className: currentPage === 'inventory' ? 'active' : '',
                            onClick: () => setCurrentPage('inventory')
                        }, 'Inventory')
                    ),
                    
                    // Content
                    e('div', {className: 'content'},
                        e(CurrentPageComponent, { setCurrentPage })
                    )
                );
            }
            
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(e(App));
            debugLog('‚úÖ Rishi Platform loaded with working navigation!');
            
        } catch(err) {
            debugLog('‚ùå CRITICAL ERROR: ' + err.message);
            debugLog('Stack: ' + (err.stack || 'No stack'));
            document.getElementById('root').innerHTML = 
                '<div style="color:red; padding:20px; font-size:18px;">' +
                'App failed to load: ' + err.message + 
                '<br><br>Check debug console for details.</div>';
        }
    </script>
</body>
</html>